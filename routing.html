<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>Routes and Results</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<link rel="stylesheet" href="./asciidoctor.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_routes_and_results">1. Routes and Results</a>
<ul class="sectlevel2">
<li><a href="#_resteasy_integration">1.1. Resteasy integration</a></li>
<li><a href="#_declaring_routes">1.2. Declaring routes</a></li>
<li><a href="#_route_parameters">1.3. Route parameters</a></li>
<li><a href="#_route_results">1.4. Route results</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_routes_and_results">1. Routes and Results</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_resteasy_integration">1.1. Resteasy integration</h3>
<div class="paragraph">
<p>On a purely Quarkus point of view, Weblith works along with the <code>quarkus-resteasy</code> extension. It will automatically register JAX-RS endpoints for your web application routes, as <code>GET</code> and <code>POST</code> resources. By the way, it also means that you can mix Reasteasy code with Weblith if really needed.</p>
</div>
</div>
<div class="sect2">
<h3 id="_declaring_routes">1.2. Declaring routes</h3>
<div class="paragraph">
<p>To declare new routes for your application, you only need to know three annotations : <code>@Controller</code>, <code>@Get</code> and <code>@Post</code>. Each annotation can have a value to represent the corresponding <code>path</code>, or it will be taken automatically from the class name (minus a <code>Controller</code> suffix) or method name.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Controller
public class MyFirstController {

    @Get
    public Response myPage() { // <b class="conum">(1)</b>
        return Response.ok().build();
    }

    @Get
    public Response myPage2(@PathParam String id) {
        return Response.ok(id).build();
    }

    @Post
    @NotCsrfProtected
    public Response myAction() {
        return Response.ok().build();
    }

}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p><code>/MyFirst/myPage</code> (GET)</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">toto++; <b class="conum">(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>zerzerze</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Will be recognized as <code>/MyFirst/myPage</code>, <code>/MyFirst/myPage2/{id}</code>,  (GET) and <code>/MyFirst/myAction</code> (POST). <code>Response</code> is the standard JAX-RS returned object ; you&#8217;ll see later that Weblith will help you on that part too.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Controller("/Controller")
class MySecondController {

    @Get("/page")
    public Response myPage() { ... }

    @Get("/page2/{id}")
    public Response myPage2(@PathParam("id") String identifier) { ... }

    @Post("/action")
    public Response myAction() { ... }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Will be recognized as <code>/Controller/page</code>, <code>/Controller/page/{id}</code> (GET) and <code>/MyFirst/action</code> (POST).</p>
</div>
</div>
<div class="sect2">
<h3 id="_route_parameters">1.3. Route parameters</h3>
<div class="paragraph">
<p>There is no specific annotation for managing parameters of your routes. As you may have noticed on the previous examples, you can use the standard JAX-RS ones : <code>@PathParam</code>, <code>@QueryParam</code>, <code>@HeaderParam</code>, <code>@MatrixParam</code>, <code>@CookieParam</code> and <code>@FormParam</code>. Be sure to import the ones from <code>org.jboss.resteasy.annotations.jaxrs</code> package so that the <code>name</code> of each one is optional (taken from the method parameter name by default). <code>@DefaultValue</code> is also available.</p>
</div>
</div>
<div class="sect2">
<h3 id="_route_results">1.4. Route results</h3>
<div class="paragraph">
<p>While you can configure yourself your JAR-RS <code>Response</code> objects, Weblith offers an handy way to manage the results of your routes via different <code>Result</code> objects :
 * <code>TextResult</code> to render plain text
 * <code>RawResult</code> to render bytes
 * <code>StreamResult</code> to render a <code>File</code> or an <code>URL</code>
 * <code>JsonResult</code> to render some JSON
 * <code>HtmlResult</code> will be addressed in the [Freemarker Templates](=freemarker-templates) chapter</p>
</div>
<div class="paragraph">
<p>Result classes have some shortcut methods to configure the future response, like adding Cookies and changing the charset (<code>UTF-8</code> by default). You can also define your own custom <code>Result</code> classes if needed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">    @Get
    public Result myPage() {
        return new TextResult("Hello World").charset(StandardCharsets.UTF_8);
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>One last very import one is the <code>Redirect</code> result. All your POST actions will be CSRF-protected (unless marked with @NotCsrfProtected). So GET methods should never be used to modify things ; and successful POST actions should never directly render results, but rather redirect to a GET method, with some optional information. The <code>Redirect</code> result will help you this way.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">    @Post
    public Result doIt() {
        return new Redirect("/Test/myPage").withSuccess("You did it !");
    }</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 0.1.1-SNAPSHOT<br>
Last updated 2020-11-29 20:51:28 UTC
</div>
</div>
</body>
</html>